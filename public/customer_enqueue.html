<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Title -->
  <title>
    Crowdculus
  </title>

  <!-- Required Meta Tags Always Come First -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">

  <!-- Favicon -->
  <link rel="shortcut icon" href="../../favicon.ico">
  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700">
  <!-- CSS Global Compulsory -->
  <link rel="stylesheet" href="./assets/vendor/bootstrap/bootstrap.min.css">
  <link rel="stylesheet" href="./assets/vendor/icon-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="./assets/vendor/icon-line-pro/style.css">
  <link rel="stylesheet" href="./assets/vendor/icon-hs/style.css">
  <link rel="stylesheet" href="./assets/vendor/animate.css">
  <link rel="stylesheet" href="./assets/vendor/dzsparallaxer/dzsparallaxer.css">
  <link rel="stylesheet" href="./assets/vendor/dzsparallaxer/dzsscroller/scroller.css">
  <link rel="stylesheet" href="./assets/vendor/dzsparallaxer/advancedscroller/plugin.css">
  <link rel="stylesheet" href="./assets/vendor/hs-megamenu/src/hs.megamenu.css">
  <link rel="stylesheet" href="./assets/vendor/hamburgers/hamburgers.min.css">

  <!-- CSS Unify -->
  <link rel="stylesheet" href="./assets/css/unify-core.css">
  <link rel="stylesheet" href="./assets/css/unify-components.css">
  <link rel="stylesheet" href="./assets/css/unify-globals.css">

  <!-- CSS Customization -->
  <link rel="stylesheet" href="./assets/css/custom.css">
</head>

<body>
  <main>

    <a class="js-go-to u-go-to-v1" href="#!" data-type="fixed" data-position='{
     "bottom": 15,
     "right": 15
   }' data-offset-top="400" data-compensation="#js-header" data-show-effect="zoomIn">
      <i class="hs-icon hs-icon-arrow-top"></i>
    </a>

    <!-- Banners -->
    <div class="row align-items-stretch">
      <div class="col-lg-12 g-mb-30">
        <!-- Article -->
        <article class="text-center g-color-white g-overflow-hidden">
          <div class="u-block-hover--scale g-min-height-200 g-flex-middle g-bg-cover g-bg-size-cover g-bg-bluegray-opacity-0_3--after g-transition-0_5" data-bg-img-src="https://www.yaylife.com/wp-content/uploads/2011/06/M96.jpg" style="background-image: url('https://www.yaylife.com/wp-content/uploads/2011/06/M96.jpg');"
            id="hundred">
            <div class="g-flex-middle-item g-pos-rel g-z-index-1 g-py-50 g-px-20">
              <h3 class="text-uppercase">YOU ARE QUEUEING FOR
                <boothname></boothname>
              </h3>
              <hr class="g-brd-3 g-brd-white g-width-30 g-my-20">


              <!-- Textual Inputs -->
              <div class="row">
                <div class="col-sm-2"></div>
                <div class="col-sm-8 text-center">
                  <form class="g-brd-around g-brd-gray-light-v4 g-pa-30 g-mb-30">
                    <div class="form-group row g-mb-25">
                      <label for="example-text-input" class="col-2 col-form-label">Your name / nickname </label>
                      <div class="col-10">
                        <input class="form-control rounded-0 form-control-md" type="text" placeholder="Jon Doe" id="input_name">
                      </div>
                    </div>
                    <div class="form-group row g-mb-25">
                      <label for="example-tel-input" class="col-2 col-form-label">Phone Number (+44) </label>
                      <div class="col-10">
                        <input class="form-control rounded-0 form-control-md" type="tel" placeholder="07123456789" id="input_phone">
                      </div>
                    </div>
                    <div class="form-group row g-mb-25">
                      <label for="example-tel-input" class="col-2 col-form-label">Group size </label>
                      <div class="col-10">
                        <input class="form-control rounded-0 form-control-md" type="tel" value="1" id="input_group_size">
                      </div>
                    </div>
                    <div class="text-center mb-5">
                      <button class="btn btn-block u-btn-primary rounded g-py-13 g-font-weight-600 g-font-size-11 text-uppercase" id="confirmQ" type="button">Yes! Queue me up!</button>
                    </div>
                  </form>
                </div>
                <div class="col-sm-2"></div>

              </div>
              <!-- End Textual Inputs -->
            </div>
          </div>
        </article>
        <!-- End Article -->
      </div>
    </div>
    <!-- End Banners -->

  </main>

  <div class="u-outer-spaces-helper"></div>


  <!-- JS Global Compulsory -->
  <script src="./assets/vendor/jquery/jquery.min.js"></script>
  <script src="./assets/vendor/jquery-migrate/jquery-migrate.min.js"></script>
  <script src="./assets/vendor/jquery.easing/js/jquery.easing.js"></script>
  <script src="./assets/vendor/popper.min.js"></script>
  <script src="./assets/vendor/bootstrap/bootstrap.min.js"></script>

  <!-- JS Implementing Plugins -->
  <script src="./assets/vendor/hs-megamenu/src/hs.megamenu.js"></script>
  <script src="./assets/vendor/dzsparallaxer/dzsparallaxer.js"></script>
  <script src="./assets/vendor/dzsparallaxer/dzsscroller/scroller.js"></script>
  <script src="./assets/vendor/dzsparallaxer/advancedscroller/plugin.js"></script>
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

  <!-- JS Unify -->
  <script src="./assets/js/hs.core.js"></script>
  <script src="./assets/js/components/hs.header.js"></script>
  <script src="./assets/js/helpers/hs.hamburgers.js"></script>
  <script src="./assets/js/components/hs.tabs.js"></script>
  <script src="./assets/js/components/hs.go-to.js"></script>

  <!-- JS Customization -->
  <script src="./assets/js/custom.js"></script>

  <!-- JS Plugins Init. -->
  <script>
    window.boothname = findGetParameter( "boothname" );
    $( document ).on( 'ready', function() {
      document.getElementById( "hundred" ).style.height = String( window.innerHeight ) + "px";
      // initialization of tabs
      $.HSCore.components.HSTabs.init( '[role="tablist"]' );

      // initialization of go to
      $.HSCore.components.HSGoTo.init( '.js-go-to' );

      // update boothname
      $( "boothname" )[ 0 ].innerText = window.boothname;
      document.title = `Queuing up for ${window.boothname}`;


      // check localStorage
      if( localStorage.getItem("_user") !== null  ) $("#input_name").val( localStorage.getItem("_user") )
      if( localStorage.getItem("_phonenumber") !== null  ) $("#input_phone").val( localStorage.getItem("_phonenumber") )
      if( localStorage.getItem("_groupsize") !== null  ) $("#input_group_size").val( localStorage.getItem("_groupsize") )

      // crowdculus
      $( "#confirmQ" ).on( "click", function() {
        input_name = $( "#input_name" ).val();
        if ( input_name == "" ) swal( "Oooops", "You need to fill in everything!", "warning" );
        input_phone = $( "#input_phone" ).val();
        if ( input_phone == "" ) swal( "Oooops", "You need to fill in everything!", "warning" );
        input_group_size = $( "#input_group_size" ).val();
        if ( input_group_size == "" ) swal( "Oooops", "You need to fill in everything!", "warning" );

        //submit and validate
        $.ajax( "/api/queue", {
          method: "PUT",
          data: {
            boothname: window.boothname,
            user: input_name,
            phonenumber: input_phone,
            groupsize: input_group_size
          }
        } ).done( function() {
          localStorage.setItem( '_user', input_name );
          localStorage.setItem( '_phonenumber', input_phone );
          localStorage.setItem( '_groupsize', input_group_size );
          swal("Sweet!", "You are all set. Take a screenshot of the QR code in the next page just in case you lose your connection. Then you can take a break and we will text you when it is almost your turn!", "success");
        } ).fail( function( data ) {
          swal( "Ooooops!", `Something went wrong, please try again later. \n Error message: ${data.responseText}`, "error" );
          console.log( data );
        } );
      } );

    } );

    $( window ).on( 'load', function() {
      // initialization of header
      $.HSCore.components.HSHeader.init( $( '#js-header' ) );
      $.HSCore.helpers.HSHamburgers.init( '.hamburger' );

      // initialization of HSMegaMenu component
      $( '.js-mega-menu' ).HSMegaMenu( {
        event: 'hover',
        pageContainer: $( '.container' ),
        breakpoint: 991
      } );
    } );

    $( window ).on( 'resize', function() {
      setTimeout( function() {
        $.HSCore.components.HSTabs.init( '[role="tablist"]' );
      }, 200 );
    } );
  </script>
</body>

</html>